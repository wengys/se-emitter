{"version":3,"sources":["../src/index.ts"],"names":["SimpleEventEmitter","event","callback","events","_events","push","eventCount","length","args","i","ev","apply","otherSource","relayEventsMapping","index","hasOwnProperty","mappedIndex","on","trigger"],"mappings":";;;;;;;;;;;;;;;IAIsBA,kB;;;;;;qCACc,E;;;;;uBACtBC,K,EAAeC,Q,EAA+B;AACpD,UAAIC,SAAS,KAAKC,OAAL,CAAaH,KAAb,MAAwB,KAAKG,OAAL,CAAaH,KAAb,IAAsB,EAA9C,CAAb;AACAE,aAAOE,IAAP,CAAYH,QAAZ;AACH;;;4BACiBD,K,EAAqC;AACnD,UAAIE,SAAS,KAAKC,OAAL,CAAaH,KAAb,CAAb,CADmD,CACjB;;AAClC,UAAIE,MAAJ,EAAY;AACR,YAAIG,aAAaH,OAAOI,MAAxB;;AADQ,0CAFoBC,IAEpB;AAFoBA,cAEpB;AAAA;;AAGR,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIH,UAApB,EAAgCG,GAAhC,EAAqC;AACjC,cAAIC,KAAKP,OAAOM,CAAP,CAAT;AACAC,aAAGC,KAAH,CAAS,IAAT,EAAeH,IAAf;AACH;AACJ;AACJ;;;gCACqBI,W,EAAiCC,kB,EAA+C;AAAA;;AAClG,WAAK,IAAIC,KAAT,IAAkBD,kBAAlB,EAAsC;AAClC,YAAIA,mBAAmBE,cAAnB,CAAkCD,KAAlC,CAAJ,EAA8C;AAAA;AAC1C,gBAAIE,cAAcH,mBAAmBC,KAAnB,CAAlB;AACAF,wBAAYK,EAAZ,CAAeH,KAAf,EAAsB,YAAoB;AAAA,iDAAhBN,IAAgB;AAAhBA,oBAAgB;AAAA;;AACtC,oBAAKU,OAAL,eAAaF,WAAb,SAA6BR,IAA7B;AACH,aAFD;AAF0C;AAK7C;AACJ;AACJ","sourcesContent":["﻿export interface EventCallback { (...args: any[]): void; }\r\ninterface EventStorage {\r\n    [indexer: string]: EventCallback[]\r\n}\r\nexport abstract class SimpleEventEmitter {\r\n    private _events: EventStorage = {}\r\n    public on(event: string, callback: EventCallback): void {\r\n        let events = this._events[event] || (this._events[event] = []);\r\n        events.push(callback)\r\n    };\r\n    protected trigger(event: string, ...args: any[]): void {\r\n        var events = this._events[event]; //特定事件处理\r\n        if (events) {\r\n            let eventCount = events.length;\r\n\r\n            for (let i = 0; i < eventCount; i++) {\r\n                let ev = events[i];\r\n                ev.apply(this, args);\r\n            }\r\n        }\r\n    }\r\n    protected relayEvents(otherSource: SimpleEventEmitter, relayEventsMapping: {[indexer:string]:string}) {\r\n        for (let index in relayEventsMapping) {\r\n            if (relayEventsMapping.hasOwnProperty(index)) {\r\n                let mappedIndex = relayEventsMapping[index];\r\n                otherSource.on(index, (...args: any[]) => {\r\n                    this.trigger(mappedIndex, ...args);\r\n                })\r\n            }\r\n        }\r\n    }\r\n}"],"file":"index.js"}